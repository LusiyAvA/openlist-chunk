# OpenList Enhanced (Mod)

è¿™æ˜¯ä¸€ä¸ª **OpenList** çš„é­”æ”¹ç‰ˆæœ¬ã€‚

æœ¬é¡¹ç›®åœ¨ä¿ç•™åŸç‰ˆæ‰€æœ‰åŠŸèƒ½å’Œæ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šï¼Œé‡æ„äº†ä¸Šä¼ é€»è¾‘ã€‚
**æ ¸å¿ƒç›®çš„åªæœ‰ä¸€ä¸ªï¼šç»•è¿‡ Cloudflare CDN ç­‰åä»£æœåŠ¡çš„ä¸Šä¼ å¤§å°é™åˆ¶ã€‚**

**ä¸»æ‰“ä¸€ä¸ªï¼šæ›¿æ¢å³ç”¨ï¼Œæ‹’ç»æŠ˜è…¾ã€‚**

## ğŸš€ æ ¸å¿ƒä¿®æ”¹

### 1. åˆ†ç‰‡ä¸Šä¼ æœºåˆ¶ V2 (Chunked Upload)
è¿™æ˜¯ä¸ºäº†è§£å†³ Cloudflare å…è´¹ç‰ˆï¼ˆé™åˆ¶å•æ¬¡è¯·æ±‚ 100MBï¼‰ç­‰ CDN ä¹Ÿå°±æ˜¯**ä¸Šä¼ æœºåˆ¶é™åˆ¶**è€Œç”Ÿçš„åŠŸèƒ½ã€‚

*   **ç‰©ç†ç»•è¿‡é™åˆ¶**ï¼šä»…åœ¨ **Form æ¨¡å¼** ä¸‹ç”Ÿæ•ˆï¼ˆé»˜è®¤å¼€å¯ï¼‰ã€‚å½“æ–‡ä»¶å¤§å°è¶…è¿‡é˜ˆå€¼ï¼ˆé»˜è®¤ 50MBï¼‰æ—¶ï¼Œè‡ªåŠ¨å°†å¤§æ–‡ä»¶åˆ‡æˆå°å—ä¸€ä¸ªä¸ªä¼ ã€‚
    *   *åŸç†*ï¼šä¸ç®¡ä½ ä¼  10GB è¿˜æ˜¯ 100GBï¼Œå¯¹ CDN æ¥è¯´ï¼Œæˆ‘åªå‘é€äº†æ— æ•°ä¸ª 50MB çš„å°è¯·æ±‚ï¼Œå®Œç¾è§„é¿â€œæ–‡ä»¶è¿‡å¤§â€çš„æ‹¦æˆªã€‚
*   **ç¡¬æ ¸æ ¡éªŒ**ï¼š
    *   **åˆ†ç‰‡å±‚**ï¼šæ¯ä¸ªåˆ†ç‰‡ä¸Šä¼ æ—¶è¿›è¡Œ **CRC32** æ ¡éªŒï¼Œä¸€æ—¦å‘ç°æ•°æ®æŸåï¼Œè‡ªåŠ¨é‡ä¼ è¯¥åˆ†ç‰‡ã€‚
    *   **æ–‡ä»¶å±‚**ï¼šæ‰€æœ‰åˆ†ç‰‡åˆå¹¶åï¼ŒæœåŠ¡ç«¯è®¡ç®— **xxHash64** ä¸å®¢æˆ·ç«¯è¿›è¡Œæœ€ç»ˆæ¯”å¯¹ï¼Œç¡®ä¿æ–‡ä»¶ä¸€ä¸ªå­—èŠ‚éƒ½ä¸å·®ã€‚
*   **å¼‚æ­¥åˆå¹¶ (å°è¯•è§£å†³è¶…æ—¶)**ï¼š
    *   ä¸ºäº†é˜²æ­¢åˆå¹¶å¤§æ–‡ä»¶æ—¶æœåŠ¡å™¨å“åº”å¤ªæ…¢å¯¼è‡´è¿æ¥è¢«åˆ‡æ–­ï¼Œæˆ‘ä»¬å°†åˆå¹¶æ“ä½œæ”¹ä¸ºäº†**åå°é™é»˜æ‰§è¡Œ**ã€‚
    *   *æ³¨ï¼šç†è®ºä¸Šè¿™èƒ½è§£å†³ 524 Timeout é—®é¢˜ï¼Œä½†æˆ‘è‡ªå·±ä¹Ÿä¸ç¡®å®šæ•ˆæœå’‹æ ·ï¼Œåæ­£æ¯”åŒæ­¥åˆå¹¶å¼ºã€‚*
*   **è‡ªåŠ¨æ‰«åœ°**ï¼š
    *   ä»»åŠ¡å®Œæˆç«‹å³æ¸…ç†ä¸´æ—¶æ–‡ä»¶ã€‚
    *   å†…ç½®æ¸…ç†è¿›ç¨‹ï¼Œè‡ªåŠ¨åˆ é™¤è¶…è¿‡ 30 åˆ†é’Ÿæœªå®Œæˆçš„æ®‹ç•™ç¢ç‰‡ã€‚

### 2. ä½“éªŒä¿®å¤
*   ä¿®å¤äº†ç®€ä½“ä¸­æ–‡ (zh-CN) æ— æ³•æ­£ç¡®åŠ è½½çš„é—®é¢˜ã€‚
*   **WebDAV** å’Œ **Stream æ¨¡å¼** æœªåšæ”¹åŠ¨ï¼Œä¿æŒåŸç‰ˆé€»è¾‘ã€‚

 ![åˆ†ç‰‡ä¸Šä¼ æ¼”ç¤º](/æ¼”ç¤ºå›¾.png)
---

## âš™ï¸ éƒ¨ç½²æŒ‡å—
## docker:éƒ¨ç½²
docker run -d --name openlist -p 5244:5244 -v "/opt/openlist/data:/opt/openlist/data" --restart always lusiya/openlist-chunk:latest

### âš ï¸ ç¼–è¯‘è­¦å‘Š
**å¼ºçƒˆä¸å»ºè®®**åœ¨ Windows ä¸‹äº¤å‰ç¼–è¯‘ Linux ç‰ˆæœ¬ï¼ˆç”±äº CGO å’Œ SQLite çš„å…¼å®¹æ€§ç„å­¦é—®é¢˜ï¼‰ã€‚
è¯·åŠ¡å¿…åœ¨**ç›®æ ‡ç³»ç»Ÿï¼ˆLinux æœåŠ¡å™¨ï¼‰ä¸Šç›´æ¥è¿›è¡ŒåŸç”Ÿç¼–è¯‘**ã€‚

### 1. Frontend Build
```bash
# Enter frontend directory
cd OpenList-Frontend-main
# Install dependencies (use --legacy-peer-deps to avoid solid-js/vite conflicts)
npm install --legacy-peer-deps
# Build
npm run build
# Sync artifacts to backend public directory
# Windows
xcopy /e /i /y dist ..\public\dist
# Linux/macOS
cp -r dist/* ../public/dist/
```

### 2. Backend Build
Requires [GCC](https://jmeubank.github.io/tdm-gcc/) (for SQLite driver compilation).
```powershell
# Windows (PowerShell)
$env:CGO_ENABLED=1  # Enable CGO for SQLite support
$env:CC="gcc"       # Specify GCC compiler
go build -o openlist.exe -tags=jsoniter -ldflags="-s -w" .
```

```bash
# Linux
export CGO_ENABLED=1
go build -o openlist -tags=jsoniter -ldflags="-s -w" .
```

---

## âš™ï¸ Deployment Guide
å®‰è£…/æ›´æ–°
æœ¬é¡¹ç›®ä¸åŸç‰ˆæ•°æ®åº“**å®Œç¾å…¼å®¹**ã€‚

1.  åœæ­¢æ­£åœ¨è¿è¡Œçš„ OpenList æœåŠ¡ã€‚
2.  å¤‡ä»½åŸç‰ˆ `openlist` äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆä»¥é˜²ä¸‡ä¸€ï¼‰ã€‚
3.  å°†ç¼–è¯‘å¥½çš„æ–° `openlist` æ–‡ä»¶è¦†ç›–è¿›å»ã€‚
4.  å¯åŠ¨æœåŠ¡ã€‚

```bash
# ç®€å•ç²—æš´çš„æ›¿æ¢å‘½ä»¤ç¤ºä¾‹
systemctl stop openlist
cp openlist /opt/openlist/openlist
chmod +x /opt/openlist/openlist
systemctl start openlist
```

---

## ğŸ›£ï¸ ç”»é¥¼ (Roadmap)

- [ ] **Stream åˆ†ç‰‡**ï¼šæœªæ¥è®¡åˆ’è®© Stream æ¨¡å¼ä¹Ÿæ”¯æŒåˆ†ç‰‡ä¸Šä¼ ã€‚
- [ ] **å¤šçº¿ç¨‹ä¸‹è½½**ï¼šæµè§ˆå™¨ç«¯çš„å¤šçº¿ç¨‹å¹¶å‘ä¸‹è½½ï¼ˆç›®å‰è¿˜æ²¡å†™å¥½ï¼Œåˆ«æ€¥ï¼‰ã€‚

---

## ğŸ“ å…è´£å£°æ˜ (Disclaimer)

*   **å…³äº Bug**ï¼šä½ å¯ä»¥æäº¤ Issue åé¦ˆ Bugï¼Œæˆ‘ä¼šçœ‹ï¼Œ**ä½†æˆ‘ä¸ä¿è¯èƒ½ä¿®**ï¼ˆç²¾åŠ›æœ‰é™ï¼Œä¸»æ‰“ä¸€ä¸ªâ€œèƒ½ç”¨å°±è¡Œâ€ï¼‰ã€‚
*   **å…³äºå…¼å®¹æ€§**ï¼šä¿®æ”¹äº†ä¸Šä¼  API æ¥å£ï¼Œè¯·åŠ¡å¿…åŒæ—¶æ›¿æ¢å‰ç«¯å’Œåç«¯ï¼Œä¸è¦æ··ç”¨åŸç‰ˆã€‚
*   **æ„Ÿè°¢openlisté¡¹ç›®çš„å¼€å‘è€…ä»¬ï¼**ï¼šéµå®ˆåŸé¡¹ç›®çš„ä¸€åˆ‡åè®®ï¼
---

*Based on OpenList v4.*